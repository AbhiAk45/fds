#include <iostream>
using namespace std;

class PizzaParlor {
    int front, rear, *q, maxSize;

public:
    PizzaParlor(int size) : front(-1), rear(-1), maxSize(size) {
        q = new int[maxSize];  // Allocate memory for the queue
    }

    ~PizzaParlor() {
        delete[] q;  // Free allocated memory
    }

    bool isFull() {
        return (front == 0 && rear == maxSize - 1) || (front == rear + 1);
    }

    bool isEmpty() {
        return front == -1 && rear == -1;
    }

    void addOrder() {
        if (!isFull()) {
            int id;
            cout << "\nEnter the Pizza ID: ";
            cin >> id;

            if (isEmpty()) {
                front = rear = 0;
            } else {
                rear = (rear + 1) % maxSize;
            }
            q[rear] = id;

            char choice;
            cout << "Do you want to add another order? (y/n): ";
            cin >> choice;
            while (choice == 'y' || choice == 'Y') {
                if (isFull()) {
                    cout << "\nOrders are full.";
                    break;
                }
                cout << "\nEnter the Pizza ID: ";
                cin >> id;
                rear = (rear + 1) % maxSize;
                q[rear] = id;
                cout << "Do you want to add another order? (y/n): ";
                cin >> choice;
            }
        } else {
            cout << "\nOrders are full.";
        }
    }

    void serveOrder() {
        if (!isEmpty()) {
            cout << "\nOrder served: " << q[front];
            if (front == rear) {
                front = rear = -1;  // Queue is now empty
            } else {
                front = (front + 1) % maxSize;
            }
        } else {
            cout << "\nOrders are empty.";
        }
    }

    void displayOrders() {
        if (!isEmpty()) {
            cout << "\nCurrent Orders: ";
            int i = front;
            while (i != rear) {
                cout << q[i] << " <- ";
                i = (i + 1) % maxSize;
            }
            cout << q[rear];
        } else {
            cout << "\nOrders are empty.";
        }
    }

    void menu() {
        int choice;
        do {
            cout << "\n\n * * * * PIZZA PARLOUR * * * *";
            cout << "\n1. Add a Pizza\n2. Display Orders\n3. Serve a Pizza\n4. Exit\nEnter your choice: ";
            cin >> choice;

            switch (choice) {
                case 1: addOrder(); break;
                case 2: displayOrders(); break;
                case 3: serveOrder(); break;
                case 4: cout << "Exiting program...\n"; break;
                default: cout << "Invalid choice. Please try again.\n";
            }
        } while (choice != 4);
    }
};

int main() {
    int M;
    cout << "Enter the maximum number of orders (M): ";
    cin >> M;

    PizzaParlor p1(M);
    p1.menu();
    return 0;
}
